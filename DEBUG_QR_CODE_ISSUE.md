# QRコード表示問題のデバッグ

**更新日**: 2026-01-02

---

## 🔴 問題

デプロイ後もQRコードが表示されない

---

## 🔍 確認事項

### 1. URLパラメータの確認

**確認項目**:
- URLに`?s=SELLER_ID`が含まれているか
- セラーIDが正しく設定されているか

**確認方法**:
1. ブラウザのアドレスバーでURLを確認
2. `?s=`の後にセラーIDが含まれているか確認

**例**:
- ✅ 正しい: `https://fleapay-lite-t1.onrender.com/seller-dashboard.html?s=test-seller-1`
- ❌ 間違い: `https://fleapay-lite-t1.onrender.com/seller-dashboard.html`

### 2. ブラウザの開発者ツールでエラーを確認

**確認方法**:
1. F12キーを押して開発者ツールを開く
2. **Console**タブを開く
3. エラーメッセージがないか確認

**確認すべきエラー**:
- JavaScriptエラー
- ネットワークエラー
- APIエラー

### 3. ネットワークタブでAPIリクエストを確認

**確認方法**:
1. F12キーを押して開発者ツールを開く
2. **Network**タブを開く
3. ページをリロード
4. `/api/seller/summary`リクエストを確認

**確認ポイント**:
- リクエストが送信されているか
- ステータスコード（200, 500など）
- レスポンスの内容

### 4. QRコード生成APIの確認

**確認項目**:
- QRコード生成API（`api.qrserver.com`）へのアクセスがブロックされていないか
- ネットワークタブでQRコード画像のリクエストを確認

---

## 🔧 トラブルシューティング

### 問題1: セラーIDがURLパラメータに含まれていない

**症状**: URLに`?s=SELLER_ID`が含まれていない

**解決策**:
1. URLに`?s=SELLER_ID`を追加
2. 例: `https://fleapay-lite-t1.onrender.com/seller-dashboard.html?s=test-seller-1`

### 問題2: JavaScriptエラーが発生している

**症状**: ブラウザのコンソールにエラーが表示されている

**解決策**:
1. エラーメッセージを確認
2. エラーの原因を特定
3. 必要に応じてコードを修正

### 問題3: APIがエラーを返している

**症状**: `/api/seller/summary` APIが500エラーを返している

**解決策**:
1. Render Dashboardでログを確認
2. エラーの原因を特定
3. 必要に応じてコードを修正

### 問題4: QRコード生成APIがブロックされている

**症状**: QRコード画像が読み込まれない

**解決策**:
1. ネットワークタブでQRコード画像のリクエストを確認
2. エラーが発生している場合は、別のQRコード生成APIを使用する

### 問題5: ブラウザのキャッシュ

**症状**: 古いコードがキャッシュされている

**解決策**:
1. ブラウザのキャッシュをクリア（Ctrl+Shift+Delete）
2. ハードリロード（Ctrl+F5）

---

## 📋 デバッグチェックリスト

### 基本確認
- [ ] URLに`?s=SELLER_ID`が含まれているか
- [ ] ブラウザのコンソールにエラーがないか
- [ ] ネットワークタブでAPIリクエストが正常か
- [ ] ブラウザのキャッシュをクリアしたか

### コード確認
- [ ] `generateQRCode()`関数が呼び出されているか
- [ ] `sellerId`が正しく取得されているか
- [ ] QRコード生成APIのURLが正しいか

### API確認
- [ ] `/api/seller/summary` APIが正常に動作しているか
- [ ] レスポンスが正しい形式か
- [ ] エラーメッセージがないか

---

## 🎯 次のステップ

1. **ブラウザの開発者ツールでエラーを確認**
   - F12キーを押して開発者ツールを開く
   - ConsoleタブとNetworkタブを確認

2. **URLパラメータを確認**
   - URLに`?s=SELLER_ID`が含まれているか確認

3. **エラーメッセージを共有**
   - コンソールに表示されているエラーメッセージを確認
   - 必要に応じて共有

---

## 🔗 関連ドキュメント

- [FIX_QR_CODE_DISPLAY.md](./FIX_QR_CODE_DISPLAY.md) - QRコード表示問題の修正
- [FIX_MISSING_SELLER_SUBSCRIPTIONS_TABLE.md](./FIX_MISSING_SELLER_SUBSCRIPTIONS_TABLE.md) - seller_subscriptionsテーブル不存在エラーの修正

