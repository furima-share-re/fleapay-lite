<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FleaPay｜お支払い完了</title>
  <link href="https://fonts.googleapis.com/css2?family=Yusei+Magic&family=M+PLUS+Rounded+1c:wght@500;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --night1:#0f2740;
      --night2:#193e5b;
      --haze:#24465f;
      --paper:rgba(255,255,240,.90);
      --paper-stroke:rgba(30,40,40,.16);
      --ink:#234236;
      --gold:#ffd88a;
      --lamp-core:#fff6cc;
      --leaf1:#9ed0b8;
      --leaf2:#6fb59a;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Yusei Magic','M PLUS Rounded 1c',system-ui,-apple-system,Segoe UI,Roboto,'Hiragino Kaku Gothic ProN','Yu Gothic',sans-serif;
      color:var(--ink);
      background: radial-gradient(120% 100% at 50% -10%, #274d6a 0%, var(--night1) 40%, var(--night2) 100%);
      overflow:hidden;
    }
    .stars{position:fixed; inset:0; z-index:0; pointer-events:none;}
    .stars::before,.stars::after{content:""; position:absolute; inset:0; background:
      radial-gradient(2px 2px at 10% 20%, rgba(255,255,255,.9), transparent 50%),
      radial-gradient(1.6px 1.6px at 40% 35%, rgba(255,255,255,.7), transparent 60%),
      radial-gradient(1.8px 1.8px at 70% 15%, rgba(255,255,255,.85), transparent 60%),
      radial-gradient(1.6px 1.6px at 85% 48%, rgba(255,255,255,.75), transparent 60%),
      radial-gradient(1.7px 1.7px at 28% 66%, rgba(255,255,255,.8), transparent 60%);
      animation: twinkle 6s ease-in-out infinite;
    }
    .stars::after{filter:blur(1px); opacity:.6; animation-duration:9s}
    @keyframes twinkle{0%,100%{opacity:.5}50%{opacity:1}}

    .scene{position:fixed; inset:0; perspective:800px; overflow:hidden}
    .layer{position:absolute; inset:0; transform-style:preserve-3d}
    .parallax{ transform: translate3d(calc(var(--px,0)*var(--depth,0)), calc(var(--py,0)*var(--depth,0)), 0) }

    .town{ position:absolute; inset:auto -10vw 0 -10vw; height:60vh; filter: drop-shadow(0 -6px 24px rgba(0,0,0,.35)); }
    .town svg{ width:120vw; height:100%; display:block }

    .flags{ position:absolute; left:-5vw; right:-5vw; top:14vh; height:80px; z-index:4; pointer-events:none }
    .flags:before{content:""; position:absolute; left:0; right:0; top:34px; height:2px; background:rgba(250,250,250,.2)}
    .flag{ position:absolute; top:36px; width:0; height:0; border-left:12px solid transparent; border-right:12px solid transparent; border-top:16px solid rgba(255,255,255,.35); filter:drop-shadow(0 1px 1px rgba(0,0,0,.2)); animation: sway 4.6s ease-in-out infinite }

    .lantern{ position:absolute; width:54px; height:68px; border-radius:28px/34px; background:
        radial-gradient(50% 35% at 50% 45%, var(--lamp-core) 0%, rgba(255,230,150,.75) 40%, rgba(255,160,60,.35) 75%, rgba(0,0,0,0) 100%);
      box-shadow: 0 0 18px 6px rgba(255,190,90,.55), inset 0 0 10px rgba(255,255,255,.5);
      transform-origin: top center; animation: swing 3.8s ease-in-out infinite;
      mix-blend-mode: screen; z-index:5 }
    .lantern::before{content:""; position:absolute; top:-18px; left:calc(50% - 1px); width:2px; height:20px; background:rgba(180,180,180,.6)}

    @keyframes swing{0%{transform:rotate(0)}50%{transform:rotate(2.6deg)}100%{transform:rotate(0)}}
    @keyframes sway{0%{transform:translateY(0)}50%{transform:translateY(2px)}100%{transform:translateY(0)}}

    .table{ position:absolute; left:50%; bottom:12vh; transform:translateX(-50%); width:min(92vw,980px); height:30vh; z-index:7 }
    .table svg{ width:100%; height:100% }

    .tag{ position:absolute; width:72px; height:96px; background:rgba(255,255,240,.9); border:1px solid rgba(60,70,50,.18); border-radius:6px; box-shadow:0 6px 12px rgba(0,0,0,.12); transform-origin: top center; z-index:8 }
    .tag:before{content:""; position:absolute; top:-16px; left:calc(50% - 1px); width:2px; height:18px; background:rgba(90,70,40,.5)}
    .tag span{ display:block; text-align:center; font-weight:900; color:#2e5a44; padding-top:14px }

    .petal{ position:absolute; width:10px; height:6px; background: radial-gradient(ellipse at 60% 40%, rgba(255,212,212,.95), rgba(255,120,150,.4)); border-radius:60% 40% 60% 40%; filter: blur(.2px); pointer-events:none; opacity:0; animation: fall linear forwards }
    @keyframes fall{ 0%{ transform: translate(var(--sx), 110vh) rotate(0deg); opacity:0 }
                     10%{ opacity:.9 }
                     70%{ opacity:1 }
                     100%{ transform: translate(calc(var(--sx) + var(--dx)), -10vh) rotate(540deg); opacity:0 } }

    .card-wrap{position:relative; z-index:10; display:grid; place-items:center; height:100vh; padding:24px}
    .card{ position:relative; width:min(92vw,760px); padding:48px 56px; text-align:center; background:var(--paper); border-radius:26px;
      box-shadow: 0 24px 68px rgba(0,0,0,.35), 0 0 0 1px var(--paper-stroke) inset; backdrop-filter: blur(4px) saturate(1.05); }
    h1{ font-size: clamp(28px,4.4vw,50px); line-height:1.22; font-weight:900; margin-bottom:12px; color:#205a3e }
    p.lead{ font-size: clamp(16px,2.6vw,22px); color: rgba(30,40,40,.88); font-weight:700; margin-bottom:22px }
    .badge{ display:inline-flex; align-items:center; gap:10px; padding:12px 20px; border-radius:999px; font-weight:900; color:#063b2a;
      background: linear-gradient(135deg,#5ac18e,#b0ffb4); box-shadow:0 10px 22px rgba(20,100,60,.23); animation:breathe 3.6s ease-in-out infinite }
    @keyframes breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.035)}}
    .actions{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:20px }
    .btn{ padding:11px 16px; border-radius:14px; border:1px solid rgba(16,60,40,.14); background:rgba(255,255,255,.75); font-weight:700; cursor:pointer; box-shadow:0 6px 14px rgba(30,80,60,.14); transition:.25s }
    .btn:hover{ transform:translateY(-2px); box-shadow:0 10px 20px rgba(30,80,60,.22) }

    .frame{ position:absolute; inset:5% 5%; border:12px solid rgba(255,255,255,.7); border-radius:18px; box-shadow:0 0 0 1px rgba(255,255,255,.9) inset, 0 8px 26px rgba(0,0,0,.12); pointer-events:none }
    .frame.hide{ display:none }

    .notice {
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(60,70,50,0.2);
      border-radius: 14px;
      padding: 14px 18px;
      margin-bottom: 24px;
      font-size: 15px;
      color: #234236;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      line-height: 1.6;
    }
    .notice small {
      display:block;
      margin-top:4px;
      color: rgba(60,60,60,0.8);
    }

    .lang{ position:fixed; right:12px; bottom:12px; z-index:20; display:flex; gap:8px }
    .lang button{ font:inherit; padding:6px 9px; border-radius:12px; border:1px solid rgba(20,60,40,.18); background:rgba(255,255,255,.78); cursor:pointer }

    @media(max-width:520px){ .card{padding:34px 22px} }
  </style>
</head>
<body>
  <div class="stars"></div>
  <div class="scene">
    <div class="flags parallax" style="--depth:.02" aria-hidden="true" id="flags"></div>
    <div class="layer parallax" style="--depth:.03" id="lanterns" aria-hidden="true"></div>
    <div class="layer town parallax" style="--depth:.01" aria-hidden="true">
      <svg viewBox="0 0 1200 600" preserveAspectRatio="none">
        <defs>
          <linearGradient id="fog" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#2a4a63" stop-opacity=".95"/>
            <stop offset="100%" stop-color="#193e5b" stop-opacity="1"/>
          </linearGradient>
          <linearGradient id="window" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="#ffdba0"/>
            <stop offset="100%" stop-color="#ffbf69"/>
          </linearGradient>
        </defs>
        <path d="M0 360 C 120 330, 220 350, 300 340 S 520 350, 620 330 S 880 350, 980 340 S 1100 350, 1200 360 V600 H0 Z" fill="url(#fog)"/>
        <g opacity=".85">
          <rect x="90"  y="380" width="14" height="18" fill="url(#window)"></rect>
          <rect x="140" y="400" width="10" height="14" fill="url(#window)"></rect>
          <rect x="280" y="395" width="12" height="16" fill="url(#window)"></rect>
          <rect x="520" y="390" width="16" height="20" fill="url(#window)"></rect>
          <rect x="800" y="400" width="12" height="16" fill="url(#window)"></rect>
          <rect x="980" y="388" width="14" height="18" fill="url(#window)"></rect>
        </g>
      </svg>
    </div>
    <div class="layer table parallax" style="--depth:.06" aria-hidden="true">
      <svg viewBox="0 0 1200 420">
        <rect x="0" y="250" width="1200" height="170" fill="#6e503d"/>
        <rect x="0" y="248" width="1200" height="12" fill="#5d4434"/>
        <g style="animation:sway 6.6s ease-in-out infinite">
          <rect x="320" y="210" width="36" height="40" rx="6" fill="#dbe9dd"/>
          <rect x="360" y="196" width="48" height="54" rx="10" fill="#bedfcc"/>
          <rect x="430" y="226" width="80" height="25" rx="6" fill="#eed3a9"/>
          <circle cx="670" cy="224" r="20" fill="#e5f1e9"/>
          <rect x="710" y="216" width="62" height="28" rx="6" fill="#d7e9dc"/>
        </g>
      </svg>
    </div>
    <div class="layer parallax" style="--depth:.09" aria-hidden="true">
      <div class="tag" style="left:22%; top:40%; animation:swing 3.6s ease-in-out infinite .2s"><span>¥1,200</span></div>
      <div class="tag" style="left:62%; top:38%; animation:swing 4.2s ease-in-out infinite .6s"><span>¥850</span></div>
      <div class="tag" style="left:44%; top:42%; animation:swing 3.8s ease-in-out infinite .1s"><span>¥2,300</span></div>
    </div>
  </div>

  <div id="petals" aria-hidden="true"></div>

  <div class="card-wrap">
    <article class="card parallax" style="--depth:.12">
      <h1 data-i18n="title">お支払い ありがとうございます</h1>
      <p class="lead" data-i18n="body">古い街並みのフリマで、やさしい取引がひとつ生まれました。処理は完了しました。</p>

      <div class="notice">
        <p>✅ 決済が完了しました。<br>
        この画面を出店スタッフにお見せください。<br>
        <small>※商品お渡し後の返品・交換はご遠慮ください。</small></p>
      </div>

      <div class="badge"><span>✓</span>&nbsp;<span data-i18n="badge">決済完了</span>&nbsp;<span>✓</span></div>
      <div class="actions">
        <button class="btn" id="photoBtn" data-i18n="photo">思い出モード（フレームON/OFF）</button>
        <button class="btn" id="backBtn" data-i18n="back">前の画面へ戻る</button>
      </div>
      <div class="frame hide" id="frame"></div>
    </article>
  </div>

  <div class="lang" aria-label="Language">
    <button data-lang="ja">日本語</button>
    <button data-lang="en">EN</button>
    <button data-lang="zh">中文</button>
  </div>

  <script>
    const root = document.documentElement;
    const setParallax=(x,y)=>{ root.style.setProperty('--px', x.toFixed(2)+'px'); root.style.setProperty('--py', y.toFixed(2)+'px'); }
    addEventListener('mousemove', e=>{ const cx=innerWidth/2, cy=innerHeight/2; setParallax((e.clientX-cx)*-0.02, (e.clientY-cy)*-0.02); });
    addEventListener('deviceorientation', e=>{ setParallax(-(e.gamma||0)*1.2, -(e.beta||0)*.8); });

    const lanternHost = document.getElementById('lanterns');
    const flagHost = document.getElementById('flags');
    function addLantern(x,delay=0){
      const l=document.createElement('div'); l.className='lantern parallax'; l.style.left=x+'%'; l.style.top=(14+Math.random()*10)+'vh';
      l.style.animationDelay=delay+'s'; l.style.setProperty('--depth', (.02+Math.random()*.03).toFixed(3));
      lanternHost.appendChild(l);
    }
    [18,32,46,60,74,88].
