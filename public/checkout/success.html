<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fleapayï½œæ±ºæ¸ˆå®Œäº†</title>
  <link href="https://fonts.googleapis.com/css2?family=Yusei+Magic&family=M+PLUS+Rounded+1c:wght@500;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --night1:#0f2740;
      --night2:#193e5b;
      --haze:#24465f;
      --paper:rgba(255,255,240,.90);
      --paper-stroke:rgba(30,40,40,.16);
      --ink:#234236;
      --gold:#f6c86b;
      --lamp-core:#fff6cc;
      --leaf1:#9ed0b8;
      --leaf2:#6fb59a;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Yusei Magic','M PLUS Rounded 1c',system-ui,-apple-system,Segoe UI,Roboto,'Hiragino Kaku Gothic ProN','Yu Gothic',sans-serif;
      color:var(--ink);
      background: radial-gradient(120% 100% at 50% -10%, #274d6a 0%, var(--night1) 40%, var(--night2) 100%);
      overflow:hidden;
    }

    /* æ˜Ÿç©º */
    .stars{position:fixed; inset:0; z-index:0; pointer-events:none;}
    .stars::before,.stars::after{content:""; position:absolute; inset:0; background:
      radial-gradient(2px 2px at 10% 20%, rgba(255,255,255,.9), transparent 50%),
      radial-gradient(1.6px 1.6px at 40% 35%, rgba(255,255,255,.7), transparent 60%),
      radial-gradient(1.8px 1.8px at 70% 15%, rgba(255,255,255,.85), transparent 60%),
      radial-gradient(1.6px 1.6px at 85% 48%, rgba(255,255,255,.75), transparent 60%),
      radial-gradient(1.7px 1.7px at 28% 66%, rgba(255,255,255,.8), transparent 60%);
      animation: twinkle 6s ease-in-out infinite;
    }
    .stars::after{filter:blur(1px); opacity:.6; animation-duration:9s}
    @keyframes twinkle{0%,100%{opacity:.5}50%{opacity:1}}

    .scene{position:fixed; inset:0; perspective:800px; overflow:hidden; z-index:1;}
    .layer{position:absolute; inset:0; transform-style:preserve-3d}
    .parallax{ transform: translate3d(calc(var(--px,0)*var(--depth,0)), calc(var(--py,0)*var(--depth,0)), 0) }

    /* ç”ºä¸¦ã¿ */
    .town{ position:absolute; inset:auto -10vw 0 -10vw; height:60vh; filter: drop-shadow(0 -6px 24px rgba(0,0,0,.35)); }
    .town svg{ width:120vw; height:100%; display:block }

    /* æ—— */
    .flags{ position:absolute; left:-5vw; right:-5vw; top:14vh; height:80px; z-index:4; pointer-events:none }
    .flags:before{content:""; position:absolute; left:0; right:0; top:34px; height:2px; background:rgba(250,250,250,.2)}
    .flag{ position:absolute; top:36px; width:0; height:0; border-left:12px solid transparent; border-right:12px solid transparent; border-top:16px solid rgba(255,255,255,.35); filter:drop-shadow(0 1px 1px rgba(0,0,0,.2)); animation: sway 4.6s ease-in-out infinite }

    /* ã¡ã‚‡ã†ã¡ã‚“ */
    .lantern{ position:absolute; width:54px; height:68px; border-radius:28px/34px; background:
        radial-gradient(50% 35% at 50% 45%, var(--lamp-core) 0%, rgba(255,230,150,.75) 40%, rgba(255,160,60,.35) 75%, rgba(0,0,0,0) 100%);
      box-shadow: 0 0 18px 6px rgba(255,190,90,.55), inset 0 0 10px rgba(255,255,255,.5);
      transform-origin: top center; animation: swing 3.8s ease-in-out infinite;
      mix-blend-mode: screen; z-index:5 }
    .lantern::before{content:""; position:absolute; top:-18px; left:calc(50% - 1px); width:2px; height:20px; background:rgba(180,180,180,.6)}

    @keyframes swing{0%{transform:rotate(0)}50%{transform:rotate(2.6deg)}100%{transform:rotate(0)}}
    @keyframes sway{0%{transform:translateY(0)}50%{transform:translateY(2px)}100%{transform:translateY(0)}}

    /* ãƒ†ãƒ¼ãƒ–ãƒ« */
    .table{ position:absolute; left:50%; bottom:12vh; transform:translateX(-50%); width:min(92vw,980px); height:30vh; z-index:7 }
    .table svg{ width:100%; height:100% }

    /* å€¤æœ­ */
    .tag{ position:absolute; width:72px; height:96px; background:rgba(255,255,240,.9); border:1px solid rgba(60,70,50,.18); border-radius:6px; box-shadow:0 6px 12px rgba(0,0,0,.12); transform-origin: top center; z-index:8 }
    .tag:before{content:""; position:absolute; top:-16px; left:calc(50% - 1px); width:2px; height:18px; background:rgba(90,70,40,.5)}
    .tag span{ display:block; text-align:center; font-weight:900; color:#2e5a44; padding-top:14px }

    /* èŠ±ã³ã‚‰ */
    .petal{ position:absolute; width:10px; height:6px; background: radial-gradient(ellipse at 60% 40%, rgba(255,212,212,.95), rgba(255,120,150,.4)); border-radius:60% 40% 60% 40%; filter: blur(.2px); pointer-events:none; opacity:0; animation: fall linear forwards }
    @keyframes fall{
      0%{ transform: translate(var(--sx), -10vh) rotate(0deg); opacity:0 }
      10%{ opacity:.9 }
      70%{ opacity:1 }
      100%{ transform: translate(calc(var(--sx) + var(--dx)), 110vh) rotate(540deg); opacity:0 }
    }

    /* ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠ */
    .card-wrap{position:relative; z-index:10; display:grid; place-items:center; height:100vh; padding:24px}
    .card{
      position:relative;
      width:min(92vw,760px);
      padding:32px 24px 30px;
      text-align:center;
      background:var(--paper);
      border-radius:26px;
      box-shadow: 0 24px 68px rgba(0,0,0,.35), 0 0 0 1px var(--paper-stroke) inset;
      backdrop-filter: blur(4px) saturate(1.05);
      border: 2px solid rgba(246,200,107,.6);
      background-image:
        linear-gradient(130deg, rgba(246,200,107,.95), transparent 40%),
        radial-gradient(circle at top left, rgba(255,255,255,.6), transparent 60%);
      background-blend-mode: soft-light, normal;
    }
    h1{
      font-size: clamp(26px,4.2vw,42px);
      line-height:1.22;
      font-weight:900;
      margin-bottom:6px;
      color:#205a3e;
    }
    p.lead{
      font-size: 14px;
      color: rgba(30,40,40,.9);
      font-weight:700;
      margin-bottom:14px;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:8px 16px;
      border-radius:999px;
      font-weight:900;
      color:#063b2a;
      background: linear-gradient(135deg,#5ac18e,#b0ffb4);
      box-shadow:0 8px 18px rgba(20,100,60,.23);
      animation:breathe 3.6s ease-in-out infinite;
      margin-bottom:12px;
      font-size:13px;
    }
    @keyframes breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.035)}}

    .notice {
      background: rgba(255,255,255,0.92);
      border: 1px solid rgba(60,70,50,0.2);
      border-radius: 14px;
      padding: 10px 14px;
      margin: 0 auto 14px;
      font-size: 13px;
      color: #234236;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      line-height: 1.6;
      text-align:left;
      max-width: 520px;
    }
    .notice strong{
      font-weight:900;
    }
    .notice small {
      display:block;
      margin-top:4px;
      color: rgba(60,60,60,0.8);
      font-size: 11px;
    }

    /* å†™çœŸã‚¨ãƒªã‚¢ */
    .photo-section{
      margin: 10px auto 16px;
      max-width: 520px;
      text-align:center;
    }
    .photo-label{
      font-size:13px;
      font-weight:700;
      margin-bottom:6px;
      color:#244636;
    }
    .photo-preview{
      position:relative;
      width:100%;
      padding-top:62%;
      border-radius:16px;
      background:rgba(255,255,255,0.96);
      border:1px solid rgba(50,60,60,.16);
      box-shadow:0 8px 18px rgba(0,0,0,.10);
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .photo-preview span{
      font-size:12px;
      color:rgba(60,70,70,.8);
      padding:0 12px;
    }
    .photo-preview img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
    }

    .frame{
      position:absolute;
      inset:6%;
      border-radius:14px;
      pointer-events:none;
      border: 10px solid rgba(246,200,107,.88);
      box-shadow:
        0 0 0 1px rgba(255,255,255,.95) inset,
        0 8px 26px rgba(0,0,0,.18);
      mix-blend-mode:soft-light;
    }
    .frame.hide{ display:none }

    .photo-controls{
      display:flex;
      justify-content:center;
      gap:10px;
      margin-top:10px;
      flex-wrap:wrap;
    }
    .btn-sub{
      padding:7px 14px;
      border-radius:999px;
      border:1px solid rgba(16,60,40,.16);
      background:rgba(255,255,255,.9);
      font-size:12px;
      font-weight:700;
      cursor:pointer;
      box-shadow:0 4px 10px rgba(30,80,60,.14);
      display:inline-flex;
      align-items:center;
      gap:6px;
      transition:.22s;
    }
    .btn-sub:hover{
      transform:translateY(-1px);
      box-shadow:0 7px 16px rgba(30,80,60,.20);
    }

    .share-title{
      margin-top:6px;
      font-size:13px;
      color:rgba(30,50,50,.95);
    }
    .hashtag{
      margin-top:6px;
      font-size:12px;
      color:rgba(50,60,70,.9);
    }

    .actions{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .btn{
      padding:11px 16px;
      border-radius:14px;
      border:1px solid rgba(16,60,40,.14);
      background:rgba(255,255,255,.9);
      font-weight:700;
      cursor:pointer;
      box-shadow:0 6px 14px rgba(30,80,60,.14);
      transition:.25s;
      font-size:13px;
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .btn.primary{
      background:linear-gradient(135deg,#256f4d,#3bbf87);
      color:#f8fffb;
      border-color:rgba(10,60,40,.3);
    }
    .btn:hover{
      transform:translateY(-2px);
      box-shadow:0 10px 20px rgba(30,80,60,.22);
    }

    .meta{
      font-size:11px;
      color:rgba(50,60,60,.9);
      margin-top:12px;
      line-height:1.5;
    }

    .lang{
      position:fixed;
      right:12px;
      bottom:12px;
      z-index:20;
      display:flex;
      gap:8px;
    }
    .lang button{
      font:inherit;
      padding:6px 9px;
      border-radius:12px;
      border:1px solid rgba(20,60,40,.18);
      background:rgba(255,255,255,.86);
      cursor:pointer;
      font-size:12px;
    }
    .lang button.active{
      background:#205a3e;
      color:#fff;
      border-color:#205a3e;
    }

    /* SNSä¸€æ™‚ç„¡åŠ¹åŒ– */
    .sns-disabled{
      display:none !important;
    }

    @media(max-width:520px){
      .card{padding:28px 18px 22px}
      .notice{text-align:left; font-size:12px;}
      .actions{gap:8px}
    }
  </style>
</head>
<body>
  <div class="stars"></div>

  <div class="scene">
    <div class="flags parallax" style="--depth:.02" aria-hidden="true" id="flags"></div>

    <div class="layer parallax" style="--depth:.03" id="lanterns" aria-hidden="true"></div>

    <div class="layer town parallax" style="--depth:.01" aria-hidden="true">
      <svg viewBox="0 0 1200 600" preserveAspectRatio="none">
        <defs>
          <linearGradient id="fog" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#2a4a63" stop-opacity=".95"/>
            <stop offset="100%" stop-color="#193e5b" stop-opacity="1"/>
          </linearGradient>
          <linearGradient id="window" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="#ffdba0"/>
            <stop offset="100%" stop-color="#ffbf69"/>
          </linearGradient>
        </defs>
        <path d="M0 360 C 120 330, 220 350, 300 340 S 520 350, 620 330 S 880 350, 980 340 S 1100 350, 1200 360 V600 H0 Z" fill="url(#fog)"/>
        <g opacity=".85">
          <rect x="90"  y="380" width="14" height="18" fill="url(#window)"></rect>
          <rect x="140" y="400" width="10" height="14" fill="url(#window)"></rect>
          <rect x="280" y="395" width="12" height="16" fill="url(#window)"></rect>
          <rect x="520" y="390" width="16" height="20" fill="url(#window)"></rect>
          <rect x="800" y="400" width="12" height="16" fill="url(#window)"></rect>
          <rect x="980" y="388" width="14" height="18" fill="url(#window)"></rect>
        </g>
      </svg>
    </div>

    <div class="layer table parallax" style="--depth:.06" aria-hidden="true">
      <svg viewBox="0 0 1200 420">
        <rect x="0" y="250" width="1200" height="170" fill="#6e503d"/>
        <rect x="0" y="248" width="1200" height="12" fill="#5d4434"/>
        <g style="animation:sway 6.6s ease-in-out infinite">
          <rect x="320" y="210" width="36" height="40" rx="6" fill="#dbe9dd"/>
          <rect x="360" y="196" width="48" height="54" rx="10" fill="#bedfcc"/>
          <rect x="430" y="226" width="80" height="25" rx="6" fill="#eed3a9"/>
          <circle cx="670" cy="224" r="20" fill="#e5f1e9"/>
          <rect x="710" y="216" width="62" height="28" rx="6" fill="#d7e9dc"/>
        </g>
      </svg>
    </div>

    <div class="layer parallax" style="--depth:.09" aria-hidden="true">
      <div class="tag" style="left:22%; top:40%; animation:swing 3.6s ease-in-out infinite .2s"><span>Â¥1,200</span></div>
      <div class="tag" style="left:62%; top:38%; animation:swing 4.2s ease-in-out infinite .6s"><span>Â¥850</span></div>
      <div class="tag" style="left:44%; top:42%; animation:swing 3.8s ease-in-out infinite .1s"><span>Â¥2,300</span></div>
    </div>
  </div>

  <div id="petals" aria-hidden="true"></div>

  <div class="card-wrap">
    <article class="card parallax" style="--depth:.12">
      <div class="badge">
        <span>âœ“</span>
        <span data-i18n="badge">Payment Completed / æ±ºæ¸ˆå®Œäº†</span>
        <span>âœ“</span>
      </div>

      <h1 data-i18n="title">æ±ºæ¸ˆãŒå®Œäº†ã—ã¾ã—ãŸ</h1>

      <p class="lead" data-i18n="lead">
        ã“ã®ç”»é¢ã‚’å‡ºåº—ã‚¹ã‚¿ãƒƒãƒ•ã«ãŠè¦‹ã›ãã ã•ã„ã€‚
      </p>

      <div class="notice">
        <p data-i18n="notice">
          <strong>âœ… æ±ºæ¸ˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚</strong><br>
          å‡ºåº—ã‚¹ã‚¿ãƒƒãƒ•ãŒå•†å“ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚<br>
          <small>â€»å•†å“ãŠæ¸¡ã—å¾Œã®è¿”å“ãƒ»äº¤æ›ã¯ã”é æ…®ãã ã•ã„ã€‚</small>
        </p>
      </div>

      <section class="photo-section">
        <p class="photo-label" data-i18n="photoLabel">AIã§åŠ å·¥ã—ãŸè¨˜å¿µå†™çœŸ</p>
        <div class="photo-preview" id="photoPreview">
          <!-- å®Ÿè£…å´ã§ img ã‚’å·®ã—è¾¼ã‚€æƒ³å®š -->
          <span data-i18n="photoPlaceholder">
            ã“ã“ã«ã€è³¼å…¥æ™‚ã«æ’®å½±ã—ãŸå†™çœŸã‚’ã‚‚ã¨ã«ã—ãŸ<br>ãƒ•ã‚©ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
          </span>
          <div class="frame hide" id="frame"></div>
        </div>

        <div class="photo-controls">
          <button class="btn-sub" id="photoFrameToggle">
            <span>ğŸ€</span><span data-i18n="photoFrameToggle">ãƒ•ã‚©ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ  ON / OFF</span>
          </button>
          <button class="btn-sub" id="savePhotoBtn">
            <span>ğŸ’¾</span><span data-i18n="savePhoto">å†™çœŸã‚’ä¿å­˜ã™ã‚‹</span>
          </button>
        </div>
      </section>

      <!-- â–¼ SNSå…±æœ‰ã‚¨ãƒªã‚¢ï¼šä»Šã¯éè¡¨ç¤ºã€‚å†é–‹æ™‚ã¯ sns-disabled ã‚’å¤–ã™ -->
      <div class="sns-section sns-disabled" id="snsSection">
        <p class="share-title" data-i18n="shareTitle">
          æ—…ã®ãƒ•ãƒªãƒä½“é¨“ã‚’ã€SNSã§ã‚·ã‚§ã‚¢ã—ã¾ã›ã‚“ã‹ï¼Ÿ
        </p>

        <div class="actions">
          <button class="btn primary" id="shareInsta">
            <span>ğŸ“¸</span><span data-i18n="shareInsta">Instagramã§ã‚·ã‚§ã‚¢</span>
          </button>
          <button class="btn" id="shareTiktok">
            <span>ğŸµ</span><span data-i18n="shareTiktok">TikTokã§ã‚·ã‚§ã‚¢</span>
          </button>
          <button class="btn" id="shareX">
            <span>âœ•</span><span data-i18n="shareX">Xã§ã‚·ã‚§ã‚¢</span>
          </button>
        </div>

        <p class="hashtag" data-i18n="hashtag">
          #Fleapay #TokyoFleaMarket #JapanFinds ã‚’ã¤ã‘ã¦ã€æ—…ã®å®ç‰©ã‚’ã‚·ã‚§ã‚¢ã—ã¾ã—ã‚‡ã†ã€‚
        </p>
      </div>
      <!-- â–² SNSå…±æœ‰ã‚¨ãƒªã‚¢ -->

      <p class="meta" data-i18n="meta">
        Thanks for supporting local creators & flea market culture.<br>
        â€»å¿…è¦ã«å¿œã˜ã¦ã€ã‚¹ã‚¿ãƒƒãƒ•ã‹ã‚‰æ±ºæ¸ˆIDã®ç¢ºèªã‚’ãŠé¡˜ã„ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
      </p>
    </article>
  </div>

  <div class="lang" aria-label="Language">
    <button data-lang="ja" class="active">æ—¥æœ¬èª</button>
    <button data-lang="en">EN</button>
    <button data-lang="zh">ä¸­æ–‡</button>
  </div>

  <script>
    // ãƒ‘ãƒ©ãƒ©ãƒƒã‚¯ã‚¹
    const root = document.documentElement;
    const setParallax = (x,y)=>{
      root.style.setProperty('--px', x.toFixed(2)+'px');
      root.style.setProperty('--py', y.toFixed(2)+'px');
    };
    addEventListener('mousemove', e=>{
      const cx=innerWidth/2, cy=innerHeight/2;
      setParallax((e.clientX-cx)*-0.02, (e.clientY-cy)*-0.02);
    }, {passive:true});
    addEventListener('deviceorientation', e=>{
      setParallax(-(e.gamma||0)*1.2, -(e.beta||0)*.8);
    });

    // ãƒ©ãƒ³ã‚¿ãƒ³ç”Ÿæˆ
    const lanternHost = document.getElementById('lanterns');
    function addLantern(x,delay=0){
      const l=document.createElement('div');
      l.className='lantern parallax';
      l.style.left=x+'%';
      l.style.top=(14+Math.random()*10)+'vh';
      l.style.animationDelay=delay+'s';
      l.style.setProperty('--depth', (.02+Math.random()*.03).toFixed(3));
      lanternHost.appendChild(l);
    }
    [18,32,46,60,74,88].forEach((x,i)=>addLantern(x,i*0.4));

    // æ——ç”Ÿæˆ
    const flagHost = document.getElementById('flags');
    function addFlag(x){
      const f=document.createElement('div');
      f.className='flag';
      f.style.left=x+'%';
      f.style.setProperty('--depth', (.01+Math.random()*.02).toFixed(3));
      flagHost.appendChild(f);
    }
    [8,22,36,50,64,78,92].forEach(addFlag);

    // èŠ±ã³ã‚‰
    const petalHost = document.getElementById('petals');
    function spawnPetal(){
      const p = document.createElement('div');
      p.className = 'petal';
      const startX = Math.random()*100;
      const drift = (Math.random()*40-20);
      p.style.setProperty('--sx', startX+'vw');
      p.style.setProperty('--dx', drift+'vw');
      p.style.animationDuration = (10+Math.random()*10)+'s';
      petalHost.appendChild(p);
      setTimeout(()=>petalHost.removeChild(p), 20000);
    }
    for(let i=0;i<18;i++) spawnPetal();
    setInterval(spawnPetal, 1200);

    // ãƒ•ãƒ¬ãƒ¼ãƒ  ON/OFF
    const frameEl = document.getElementById('frame');
    const frameToggleBtn = document.getElementById('photoFrameToggle');
    frameToggleBtn.addEventListener('click', ()=>{
      frameEl.classList.toggle('hide');
    });

    // å†™çœŸä¿å­˜ï¼ˆå®Ÿè£…å´ã§å®Ÿç”»åƒãŒã‚ã‚‹å ´åˆã«å·®ã—æ›¿ãˆå¯ï¼‰
    const savePhotoBtn = document.getElementById('savePhotoBtn');
    savePhotoBtn.addEventListener('click', ()=>{
      alert('å†™çœŸã®ä¿å­˜ã¯ã€ã“ã®ç”»é¢ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã§ã‚‚ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚å®Ÿè£…ã«å¿œã˜ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‡¦ç†ã‚’è¿½åŠ ã§ãã¾ã™ã€‚');
    });

    // å¤šè¨€èªå¯¾å¿œ
    const dict = {
      ja:{
        badge: "Payment Completed / æ±ºæ¸ˆå®Œäº†",
        title: "æ±ºæ¸ˆãŒå®Œäº†ã—ã¾ã—ãŸ",
        lead: "ã“ã®ç”»é¢ã‚’å‡ºåº—ã‚¹ã‚¿ãƒƒãƒ•ã«ãŠè¦‹ã›ãã ã•ã„ã€‚",
        notice: "<strong>âœ… æ±ºæ¸ˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚</strong><br>å‡ºåº—ã‚¹ã‚¿ãƒƒãƒ•ãŒå•†å“ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚<br><small>â€»å•†å“ãŠæ¸¡ã—å¾Œã®è¿”å“ãƒ»äº¤æ›ã¯ã”é æ…®ãã ã•ã„ã€‚</small>",
        photoLabel: "AIã§åŠ å·¥ã—ãŸè¨˜å¿µå†™çœŸ",
        photoPlaceholder: "ã“ã“ã«ã€è³¼å…¥æ™‚ã«æ’®å½±ã—ãŸå†™çœŸã‚’ã‚‚ã¨ã«ã—ãŸ<br>ãƒ•ã‚©ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚",
        photoFrameToggle: "ãƒ•ã‚©ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ  ON / OFF",
        savePhoto: "å†™çœŸã‚’ä¿å­˜ã™ã‚‹",
        shareTitle: "æ—…ã®ãƒ•ãƒªãƒä½“é¨“ã‚’ã€SNSã§ã‚·ã‚§ã‚¢ã—ã¾ã›ã‚“ã‹ï¼Ÿ",
        shareInsta: "Instagramã§ã‚·ã‚§ã‚¢",
        shareTiktok: "TikTokã§ã‚·ã‚§ã‚¢",
        shareX: "Xã§ã‚·ã‚§ã‚¢",
        hashtag: "#Fleapay #TokyoFleaMarket #JapanFinds ã‚’ã¤ã‘ã¦ã€æ—…ã®å®ç‰©ã‚’ã‚·ã‚§ã‚¢ã—ã¾ã—ã‚‡ã†ã€‚",
        meta: "Thanks for supporting local creators and flea market culture.<br>â€»å¿…è¦ã«å¿œã˜ã¦ã€ã‚¹ã‚¿ãƒƒãƒ•ã‹ã‚‰æ±ºæ¸ˆIDã®ç¢ºèªã‚’ãŠé¡˜ã„ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚"
      },
      en:{
        badge: "Payment Completed",
        title: "Payment Completed",
        lead: "Please show this screen to the shop staff.",
        notice: "<strong>âœ… Your payment has been completed.</strong><br>The staff will hand you your item.<br><small>*Refunds and exchanges are not available after receiving your item.</small>",
        photoLabel: "Your AI-framed memory photo",
        photoPlaceholder: "Your commemorative photo with a Japanese-style frame<br>will appear here.",
        photoFrameToggle: "Photo frame ON / OFF",
        savePhoto: "Save photo",
        shareTitle: "Share your flea market moment on SNS!",
        shareInsta: "Share on Instagram",
        shareTiktok: "Share on TikTok",
        shareX: "Share on X",
        hashtag: "Share your travel treasure with #Fleapay #TokyoFleaMarket #JapanFinds",
        meta: "Thank you for supporting local creators and flea market culture.<br>*Staff may ask you to confirm your payment ID if necessary."
      },
      zh:{
        badge: "ä»˜æ¬¾å®Œæˆ",
        title: "ä»˜æ¬¾å·²å®Œæˆ",
        lead: "è¯·å°†æ­¤ç”»é¢å‡ºç¤ºç»™æ‘Šä¸»ã€‚",
        notice: "<strong>âœ… ä»˜æ¬¾å·²å®Œæˆã€‚</strong><br>æ‘Šä¸»ä¼šä¸ºæ‚¨é€’ä¸Šå•†å“ã€‚<br><small>â€»é¢†å–å•†å“åï¼Œæ•ä¸æ¥å—é€€æ¢ã€‚</small>",
        photoLabel: "AI ç”Ÿæˆçš„çºªå¿µç…§ç‰‡",
        photoPlaceholder: "è¿™é‡Œä¼šæ˜¾ç¤ºåŸºäºæ‚¨åˆšæ‰æ‹æ‘„ç…§ç‰‡çš„<br>å’Œé£ç›¸æ¡†å›¾ç‰‡ã€‚",
        photoFrameToggle: "ç›¸æ¡† å¼€ / å…³",
        savePhoto: "ä¿å­˜ç…§ç‰‡",
        shareTitle: "è¦ä¸è¦åœ¨ SNS ä¸Šåˆ†äº«è¿™æ¬¡å¸‚é›†ä½“éªŒï¼Ÿ",
        shareInsta: "åˆ†äº«åˆ° Instagram",
        shareTiktok: "åˆ†äº«åˆ° TikTok",
        shareX: "åˆ†äº«åˆ° X",
        hashtag: "æ¬¢è¿ä½¿ç”¨ #Fleapay #TokyoFleaMarket #JapanFinds åˆ†äº«æ‚¨çš„æ—…é€”æ”¶è·ã€‚",
        meta: "æ„Ÿè°¢æ‚¨æ”¯æŒæœ¬åœ°åˆ›ä½œè€…ä¸è·³èš¤å¸‚é›†æ–‡åŒ–ã€‚<br>â€»å¦‚æœ‰éœ€è¦ï¼Œå·¥ä½œäººå‘˜å¯èƒ½ä¼šè¯·æ‚¨ç¡®è®¤ä»˜æ¬¾ç¼–å·ã€‚"
      }
    };

    function applyLang(lang){
      const t = dict[lang] || dict.ja;
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        if(t[key] !== undefined){
          el.innerHTML = t[key];
        }
      });
      document.querySelectorAll('.lang button').forEach(btn=>{
        btn.classList.toggle('active', btn.getAttribute('data-lang')===lang);
      });
      document.documentElement.lang = lang;
    }

    document.querySelectorAll('.lang button').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const lang = btn.getAttribute('data-lang');
        applyLang(lang);
      });
    });

    // åˆæœŸè¨€èªï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã‚ã‚‹ç¨‹åº¦æ¨å®šï¼‰
    (function initLang(){
      const nav = navigator.language || 'ja';
      if(nav.startsWith('en')) applyLang('en');
      else if(nav.startsWith('zh')) applyLang('zh');
      else applyLang('ja');
    })();

    // ã‚·ã‚§ã‚¢å‡¦ç†ï¼ˆå°†æ¥SNSé€£æºç”¨ã®åœŸå°ã¨ã—ã¦æ®‹ã™ï¼‰
    function buildShareText(lang){
      const t = dict[lang] || dict.ja;
      return {
        text: t.shareTitle.replace(/<br>/g,' ') || '',
        hashtags: "#Fleapay #TokyoFleaMarket #JapanFinds"
      };
    }

    function getLangFromHtml(){
      const lang = document.documentElement.lang;
      if(lang === 'en' || lang === 'zh' || lang === 'ja') return lang;
      return 'ja';
    }

    function tryShare(target){
      const lang = getLangFromHtml();
      const s = buildShareText(lang);
      const url = window.location.origin || '';

      const textBase = s.text + ' ' + s.hashtags;

      // å°†æ¥ï¼šã“ã“ã‚’ã€Œå„SNSã‚¢ãƒ—ãƒªã‚’é–‹ãå‡¦ç†ã€ã«å·®ã—æ›¿ãˆã‚‹æƒ³å®š
      if(navigator.share){
        navigator.share({
          title: 'Fleapay',
          text: textBase + ' [' + target + ']',
          url
        }).catch(()=>{ /* user cancelled */ });
      }else{
        alert(textBase + "\n\nã“ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€" + target + " ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚");
      }
    }

    const shareInstaBtn = document.getElementById('shareInsta');
    const shareTiktokBtn = document.getElementById('shareTiktok');
    const shareXBtn = document.getElementById('shareX');

    if(shareInstaBtn){
      shareInstaBtn.addEventListener('click', ()=>tryShare('Instagram'));
    }
    if(shareTiktokBtn){
      shareTiktokBtn.addEventListener('click', ()=>tryShare('TikTok'));
    }
    if(shareXBtn){
      shareXBtn.addEventListener('click', ()=>tryShare('X'));
    }
  </script>
</body>
</html>
