<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FleaPay｜お支払い完了</title>
  <link href="https://fonts.googleapis.com/css2?family=Yusei+Magic&family=M+PLUS+Rounded+1c:wght@500;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --sky1:#bfe9f3;       /* morning blue */
      --sky2:#dff7e8;       /* mint haze */
      --leaf1:#88c9a1;      /* leaf */
      --leaf2:#5aa77f;      /* deep leaf */
      --wood:#4b3b2f;       /* wood ink */
      --paper:rgba(255,255,245,.88);
      --paper-stroke:rgba(40,60,40,.12);
      --ink:#254336;        /* copy color */
      --accent:#4caf50;     /* badge grad */
      --gold:#edd382;       /* warm accent */
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Yusei Magic','M PLUS Rounded 1c',system-ui,-apple-system,Segoe UI,Roboto,'Hiragino Kaku Gothic ProN','Yu Gothic',sans-serif;
      color:var(--ink);
      background: linear-gradient(120deg,var(--sky1),var(--sky2));
      background-size: 160% 160%;
      animation: sky 28s ease-in-out infinite;
      overflow:hidden;
    }
    @keyframes sky{0%{background-position:0% 40%}50%{background-position:100% 60%}100%{background-position:0% 40%}}

    /* Scene base */
    .scene{position:fixed; inset:0; perspective:800px; overflow:hidden}
    .layer{position:absolute; inset:0; transform-style:preserve-3d}
    .parallax{ transform: translate3d(calc(var(--px,0)*var(--depth,0)), calc(var(--py,0)*var(--depth,0)), 0) }

    /* Dappled light */
    .light{position:absolute; inset:-10% -10%; pointer-events:none; mix-blend-mode:soft-light; opacity:.55;
      background:
        radial-gradient(40% 25% at 18% 0%, rgba(255,255,255,.35), rgba(255,255,255,0) 70%),
        radial-gradient(45% 30% at 80% -5%, rgba(255,255,255,.28), rgba(255,255,255,0) 70%),
        radial-gradient(30% 20% at 40% -10%, rgba(255,255,255,.22), rgba(255,255,255,0) 70%);
      animation: rayon 18s ease-in-out infinite;
    }
    @keyframes rayon{0%{transform:translateY(-1%) rotate(-.6deg)}50%{transform:translateY(1%) rotate(.4deg)}100%{transform:translateY(-1%) rotate(-.6deg)}}

    /* Linen canopy (not festival—calm fabric) */
    .canopy{position:absolute; top:0; left:-10vw; width:120vw; height:30vh; z-index:2;
      background:
        linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.35)),
        repeating-linear-gradient(90deg, rgba(210,210,210,.25) 0 12px, rgba(255,255,255,.15) 12px 24px);
      box-shadow: 0 20px 40px rgba(0,0,0,.08);
      transform-origin: top left;
      animation: sway 6s ease-in-out infinite;
      border-bottom-left-radius:8px; border-bottom-right-radius:8px;
      filter: drop-shadow(0 10px 12px rgba(50,70,60,.12));
    }
    @keyframes sway{0%,100%{transform:skewX(0deg) translateY(0)}50%{transform:skewX(-1.2deg) translateY(2px)}}

    /* Mid-ground: stalls & tables silhouettes */
    .hills{position:absolute; inset:auto -10vw 0 -10vw; height:45vh; z-index:1}
    .hills svg{width:120vw; height:100%; display:block}

    /* Props: table with goods */
    .table{ position:absolute; left:50%; bottom:14vh; transform:translateX(-50%); width:min(92vw,900px); height:26vh; z-index:6 }
    .table svg{ width:100%; height:100% }

    /* Floating dust */
    .mote{position:absolute; width:8px; height:8px; border-radius:50%; pointer-events:none;
      background: radial-gradient(circle at 40% 40%, rgba(255,255,255,.95), rgba(255,255,255,.1));
      opacity:0; filter: blur(.25px);
      animation: mote linear forwards;
    }
    @keyframes mote{0%{transform:translate(var(--x,0),110vh) scale(.4);opacity:0}12%{opacity:.7}70%{opacity:.95}100%{transform:translate(calc(var(--x,0) + var(--drift,0px)),-16vh) scale(1);opacity:0}}

    /* Price tags swing */
    .tag{ position:absolute; width:72px; height:96px; background:rgba(255,255,240,.9); border:1px solid rgba(60,70,50,.18); border-radius:6px; box-shadow:0 6px 12px rgba(0,0,0,.12); transform-origin: top center; z-index:7 }
    .tag:before{content:""; position:absolute; top:-16px; left:calc(50% - 1px); width:2px; height:18px; background:rgba(90,70,40,.5)}
    .tag span{ display:block; text-align:center; font-weight:900; color:#2e5a44; padding-top:14px }

    /* Foreground card */
    .card-wrap{position:relative; z-index:9; display:grid; place-items:center; height:100vh; padding:24px}
    .card{ position:relative; width:min(92vw,720px); padding:48px 56px; text-align:center; background:var(--paper); border-radius:26px;
      box-shadow: 0 22px 60px rgba(30,60,40,.22), 0 0 0 1px var(--paper-stroke) inset; backdrop-filter: blur(6px); }
    h1{ font-size: clamp(28px,4.4vw,48px); line-height:1.25; font-weight:900; margin-bottom:12px;
      background: linear-gradient(45deg,#d4fc79,#96e6a1); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent }
    p.lead{ font-size: clamp(16px,2.6vw,22px); color: rgba(20,40,30,.86); font-weight:700; margin-bottom:22px }
    .badge{ display:inline-flex; align-items:center; gap:10px; padding:12px 20px; border-radius:999px; font-weight:900; color:#063b2a;
      background: linear-gradient(135deg,#5ac18e,#b0ffb4); box-shadow:0 10px 22px rgba(20,100,60,.23); animation:breathe 3.6s ease-in-out infinite }
    @keyframes breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.035)}}

    .actions{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:20px }
    .btn{ padding:11px 16px; border-radius:14px; border:1px solid rgba(16,60,40,.14); background:rgba(255,255,255,.7); font-weight:700; cursor:pointer; box-shadow:0 6px 14px rgba(30,80,60,.14); transition:.25s}
    .btn:hover{ transform:translateY(-2px); box-shadow:0 10px 20px rgba(30,80,60,.22) }

    /* Photo frame (screenshot mode) */
    .frame{ position:absolute; inset:6% 6%; border:10px solid rgba(255,255,255,.6); border-radius:18px; pointer-events:none; box-shadow:0 0 0 1px rgba(255,255,255,.9) inset, 0 8px 26px rgba(0,0,0,.12) }
    .frame.hide{ display:none }

    /* Clouds extremely subtle */
    .cloud{ position:absolute; top:12vh; width:42vw; height:18vh; background: radial-gradient(ellipse at 30% 50%, rgba(255,255,255,.7), rgba(255,255,255,0) 60%); filter: blur(6px); opacity:.5; mix-blend-mode:screen; animation: cloud 100s linear infinite }
    .cloud.c2{ top:18vh; animation-duration:140s; transform:scale(1.2) }
    @keyframes cloud{0%{left:-50vw}100%{left:110vw}}

    /* i18n toggle */
    .lang{ position:fixed; right:12px; bottom:12px; z-index:20; display:flex; gap:8px }
    .lang button{ font:inherit; padding:6px 9px; border-radius:12px; border:1px solid rgba(20,60,40,.18); background:rgba(255,255,255,.7); cursor:pointer }

    @media(max-width:520px){ .card{padding:34px 22px} }
  </style>
</head>
<body>
  <div class="scene">
    <div class="layer parallax" style="--depth:.02">
      <div class="light"></div>
      <div class="cloud"></div>
      <div class="cloud c2"></div>
      <div class="canopy parallax" style="--depth:.01"></div>
    </div>

    <!-- distant market silhouettes (stalls, trees) -->
    <div class="layer parallax hills" style="--depth:.015">
      <svg viewBox="0 0 1200 450" preserveAspectRatio="none" aria-hidden="true">
        <defs>
          <linearGradient id="gLeaf" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="#a7dcc1" stop-opacity=".9"/>
            <stop offset="100%" stop-color="#7cbc9c" stop-opacity="1"/>
          </linearGradient>
        </defs>
        <!-- trees back -->
        <path d="M0,320 C120,300 220,310 360,300 C520,288 700,320 900,300 C1040,288 1130,300 1200,310 V450 H0 Z" fill="url(#gLeaf)"/>
        <!-- soft stall shapes -->
        <g fill="#78b190" opacity=".9">
          <path d="M120 290 h180 v20 h-180 Z"/>
          <path d="M520 280 h200 v24 h-200 Z"/>
          <path d="M880 285 h160 v20 h-160 Z"/>
        </g>
      </svg>
    </div>

    <!-- foreground table with goods (SVG, subtle sway) -->
    <div class="layer table parallax" style="--depth:.06">
      <svg viewBox="0 0 1200 400" aria-hidden="true">
        <!-- wooden table -->
        <rect x="0" y="220" width="1200" height="160" fill="#7a5a44" opacity=".95"/>
        <rect x="0" y="220" width="1200" height="10" fill="#6c4d39"/>
        <!-- cloth runner -->
        <g style="animation:sway 5.8s ease-in-out infinite">
          <rect x="260" y="210" width="680" height="28" rx="6" fill="rgba(255,255,255,.85)"/>
        </g>
        <!-- goods: vases, books, cup, fabric rolls -->
        <g style="animation:sway 6.6s ease-in-out infinite">
          <rect x="330" y="170" width="36" height="40" rx="6" fill="#d9efe2"/>
          <rect x="370" y="160" width="44" height="50" rx="10" fill="#bfe1cf"/>
          <rect x="430" y="185" width="80" height="25" rx="6" fill="#eed3a9"/>
          <rect x="520" y="168" width="20" height="42" rx="6" fill="#c9dfb5"/>
          <rect x="546" y="168" width="24" height="42" rx="6" fill="#a7d0b3"/>
          <rect x="574" y="168" width="18" height="42" rx="6" fill="#89c3a0"/>
          <circle cx="700" cy="184" r="20" fill="#e5f1e9"/>
          <rect x="740" y="176" width="58" height="28" rx="6" fill="#d7e9dc"/>
        </g>
      </svg>
    </div>

    <!-- price tags that gently swing (to say it's a flea market) -->
    <div class="layer parallax" style="--depth:.09">
      <div class="tag" style="left:22%; top:38%; animation:swing 3.6s ease-in-out infinite .2s"><span>¥1,200</span></div>
      <div class="tag" style="left:62%; top:36%; animation:swing 4.2s ease-in-out infinite .6s"><span>¥850</span></div>
      <div class="tag" style="left:44%; top:40%; animation:swing 3.8s ease-in-out infinite .1s"><span>¥2,300</span></div>
    </div>
  </div>

  <!-- Foreground content -->
  <div class="card-wrap">
    <article class="card parallax" style="--depth:.12">
      <h1 data-i18n="title">お支払い ありがとうございます</h1>
      <p class="lead" data-i18n="body">森のフリマで、やさしい取引がひとつ生まれました。処理は完了しました。</p>
      <div class="badge"><span>✓</span>&nbsp;<span data-i18n="badge">決済完了</span>&nbsp;<span>✓</span></div>
      <div class="actions">
        <button class="btn" id="photoBtn" data-i18n="photo">思い出モード（フレームON/OFF）</button>
        <button class="btn" id="backBtn" data-i18n="back">前の画面へ戻る</button>
      </div>
      <div class="frame hide" id="frame"></div>
    </article>
  </div>

  <div class="lang" aria-label="Language">
    <button data-lang="ja">日本語</button>
    <button data-lang="en">EN</button>
    <button data-lang="zh">中文</button>
  </div>

  <style>
    @keyframes swing{0%{transform:rotate(0)}50%{transform:rotate(3.6deg)}100%{transform:rotate(0)}}
  </style>

  <script>
    // ---------- Parallax ----------
    const root = document.documentElement;
    function setParallax(x,y){ root.style.setProperty('--px', x.toFixed(2)+'px'); root.style.setProperty('--py', y.toFixed(2)+'px'); }
    window.addEventListener('mousemove', e=>{
      const cx=innerWidth/2, cy=innerHeight/2;
      setParallax((e.clientX-cx)*-0.02, (e.clientY-cy)*-0.02);
    });
    window.addEventListener('deviceorientation', e=>{ setParallax(-(e.gamma||0)*1.2, -(e.beta||0)*.8); });

    // ---------- Motes ----------
    const LAYERS = document.querySelector('.scene');
    function spawnMote(){
      const m=document.createElement('div'); m.className='mote parallax';
      const startX = Math.random()*innerWidth; m.style.left = startX+'px';
      m.style.setProperty('--x', (Math.random()*80-40)+'px');
      m.style.setProperty('--drift', (Math.random()*120-60)+'px');
      m.style.animationDuration = (12+Math.random()*14)+'s';
      m.style.animationDelay = (Math.random()*6)+'s';
      m.style.setProperty('--depth', (Math.random()*.06+.01).toFixed(3));
      LAYERS.appendChild(m); m.addEventListener('animationend', ()=>{m.remove(); spawnMote();});
    }
    for(let i=0;i<42;i++) spawnMote();

    // ---------- Photo frame toggle ----------
    const frame=document.getElementById('frame');
    document.getElementById('photoBtn').addEventListener('click', ()=>{ frame.classList.toggle('hide'); });

    // ---------- Back button ----------
    document.getElementById('backBtn').addEventListener('click', ()=>{ if (document.referrer) history.back(); else location.href='/'; });

    // ---------- Reduce motion ----------
    const mq = matchMedia('(prefers-reduced-motion: reduce)');
    function reduce(){ if(mq.matches){ document.querySelectorAll('.light,.cloud,.mote,.canopy').forEach(el=>el.style.animation='none'); } }
    mq.addEventListener('change', reduce); reduce();

    // ---------- Simple i18n ----------
    const dict={
      ja:{ title:'お支払い ありがとうございます', body:'森のフリマで、やさしい取引がひとつ生まれました。処理は完了しました。', badge:'決済完了', photo:'思い出モード（フレームON/OFF）', back:'前の画面へ戻る' },
      en:{ title:'Thank you for your purchase', body:'At the forest flea market, a gentle trade was made. Your payment is complete.', badge:'Payment Complete', photo:'Photo Mode (Frame ON/OFF)', back:'Go back' },
      zh:{ title:'感谢您的购买', body:'在森林跳蚤市场，一次温柔的交换诞生了。付款已完成。', badge:'付款完成', photo:'拍照模式（边框开关）', back:'返回上一页' }
    };
    document.querySelectorAll('.lang button').forEach(btn=>btn.addEventListener('click',()=>{
      const d=dict[btn.dataset.lang]; if(!d) return; document.querySelectorAll('[data-i18n]').forEach(el=>{ const k=el.dataset.i18n; el.textContent=d[k]; });
    }));
  </script>
</body>
</html>
