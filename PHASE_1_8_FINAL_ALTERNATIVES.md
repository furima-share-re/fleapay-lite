# Phase 1.8: 最終的な代替方法

**作成日**: 2026-01-04  
**問題**: DNS解決ではIPv6アドレスのみが返され、`psql`がIPv4アドレスを探している  
**状況**: 環境変数を使用してもDNS解決の問題が解決しない

---

## ⚠️ 現在の状況

**DNS解決の結果：**
- IPv6アドレス: `2406:da14:271:990e:700c:1843:6a5d:7a0b`（取得済み）
- IPv4アドレス: 取得できませんでした

**`psql`と`pg_restore`がIPv4アドレスを探しているため、接続できません。**

---

## ✅ 代替方法1: Supabase DashboardのSQL Editorを使用（推奨）

**Supabase DashboardのSQL Editorを使用してデータをインポート：**

### 手順

1. **Supabase Dashboard**にログイン
2. **プロジェクト `mluvjdhqgfpcefsmvjae`** を選択
3. **SQL Editor**を開く
4. **バックアップファイルをSQL形式に変換**
   - `.dir.tar.gz`ファイルを展開
   - SQLファイルを抽出
   - SQL Editorで実行

**注意**: この方法は大きなデータセットには適していません。

---

## ✅ 代替方法2: 別のマシンまたはクラウド環境を使用

**別のマシンまたはクラウド環境（例：GitHub Actions、AWS EC2）を使用してデータをインポート：**

- IPv6接続が正常に動作する環境を使用
- または、IPv4アドレスが取得できる環境を使用

---

## ✅ 代替方法3: Supabase CLIの`db push`コマンドを使用

**Supabase CLIの`db push`コマンドを使用：**

```powershell
# プロジェクトディレクトリに移動
cd "C:\Users\yasho\OneDrive\ドキュメント\GitHub\fleapay-lite"

# Supabase CLIを使用してデータをプッシュ
npx supabase db push
```

**注意**: `db push`は主にマイグレーションファイルをプッシュするためのコマンドです。

---

## ✅ 代替方法4: ネットワーク設定を変更

**ネットワーク設定を変更してIPv4アドレスを取得：**

1. **DNSサーバーを変更**（例: Google DNS `8.8.8.8`）
2. **IPv6を無効化**（一時的に）
3. **ネットワークアダプターの設定を変更**

**注意**: この方法はシステム設定を変更する必要があるため、慎重に実行してください。

---

## 📋 推奨手順

1. **Supabase DashboardのSQL Editorを使用**（小規模なデータの場合）
2. **別のマシンまたはクラウド環境を使用**（大規模なデータの場合）
3. **ネットワーク設定を変更**（上級者向け）

---

## 🎯 次のステップ

**現在の環境では、DNS解決の問題により、`pg_restore`を使用したデータインポートが困難です。**

**推奨される次のステップ：**
1. **Supabase DashboardのSQL Editorを使用**
2. **または、別のマシン/クラウド環境を使用**

---

**まずは、Supabase DashboardのSQL Editorを使用することを検討してください！**

